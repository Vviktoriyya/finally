<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BookStore - Your Online Bookstore</title>
    <meta name="description" content="BookStore - A wide selection of books in various genres. Buy the most popular and new books online.">
    <link href="./output.css" rel="stylesheet">


    <link href="https://fonts.googleapis.com/css2?family=Unica+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
        }

        html, body {
            overflow: scroll;
            scrollbar-width: none;
        }


        .scrollAuthor{
            overflow: scroll;
            scrollbar-width: none;
            max-height: 40px;
            max-width: 100px;
        }
        .scrollName{
            overflow: scroll;
            scrollbar-width: none;
            max-height: 40px;
            max-width: 90px;
        }
        #modalOverlay {
            background-color: rgba(0, 0, 0, 0.62);
        }
        #modalOverlay1 {
            background-color: rgba(0, 0, 0, 0.62);
        }

    </style>
</head>

<body>

<div class="w-full mx-auto pt-[60px] px-[20px] sm:px-[50px] md:px-[50px] lg:px-[110px] xxl:px-[170px]">
    <div class="header flex justify-between  ">
        <a href="index.html" class="logo flex justify-between items-center gap-[12px] ">
            <img src="./icon/BookLogoOpen.png" class="w-[26px] h-[22px]">
            <p class="font-unica text-[20px]">BOOKStore</p>
        </a>
        <div class="buttons flex gap-[20px]">
            <button id="openSavedModal" >
                <img src="./icon/SaveChoose.png" class="w-[16px] h-[23px] ">
            </button>
            <button id="openCartModal" class="open-cart-button">
                <img src="./icon/SHOPPINGCART.png" class="w-[27px] h-[24px]">
            </button>
        </div>
    </div>

    <!-- –ë–æ–∫–æ–≤–∞ –º–æ–¥–∞–ª–∫–∞ —Å–ø—Ä–∞–≤–∞ -->
    <div id="modal-container"></div>

    <div class="flex flex-col xl:flex-row justify-between gap-[100px] lg:gap-[150px] px-[20px] xxl:px-[200px] xl:px-[150px] pt-[100px] lg:pt-[110px] lg:items-center">
        <div class="w-full lg:w-[280px] h-[417px] pt-[22px]">
            <div class="book border-2  rounded-[10px] bg-gray-300 flex-shrink-0 shadow-lg sm:h-full xs:h-[380px] sm:w-[280px] xs:w-[250px] overflow-hidden mx-auto">
                <img id="book-img" alt="Book cover" class=" w-full h-full rounded-[10px]" />
            </div>
        </div>


        <div class="infoBook w-full">
            <div class="w-full  flex sm:justify-between xs:justify-center items-center flex-wrap gap-2">
                <p id="book-title" class="font-unica text-[36px] font-[400] text-gray"></p>
                <button id="myButton" class="flex justify-center items-center border-2 rounded-[20px] border-gray w-[57px] yellow-bg bg-white hover:bg-yellow h-[46px]">
                    <img src="./icon/SaveChoose.png" class="w-[13px] h-[18px]">
                </button>

            </div>
            <div id="savedBooksList"></div>

            <div class="relative w-full pt-[19px] flex items-center h-[66px]">
                <div class="absolute left-0 right-0 bg-lightGray bottom-[-17px] h-[64px] rounded-[20px] z-[-1]"></div>
                <div id="book-author" class="text-gray relative right-[9px] bg-white font-syne h-[64px] border-[2px] border-dashed border-gray-300 px-[20px] py-[13px] rounded-[20px] text-[14px] w-full">
                </div>
            </div>

            <div class="h-[30px]"></div>
            <div class="relative w-full max-h-[165px]">
                <div class="absolute left-0 right-0 bg-lightGray bottom-[-8px] h-[165px] rounded-[20px] z-[-1]"></div>
                <div id="book-description" class="text-gray relative right-[9px] bg-white font-syne h-[165px] border-[2px] border-dashed border-gray-300 px-[20px] py-[13px] rounded-[20px] text-[14px] w-full overflow-y-auto scrollbar-none">
                    <!-- –û–ø–∏—Å –∫–Ω–∏–≥–∏ –∑'—è–≤–∏—Ç—å—Å—è —Ç—É—Ç -->
                </div>
            </div>

            <div class="pt-[30px] lg:pt-[50px] w-full flex justify-between flex-wrap gap-4 items-center">
                <div class="text-Orange text-[28px] lg:text-[36px] font-[400] font-syne leading-[1.2]" id="book-price">

                </div>
                <div id="book-count" class="flex w-[104px] h-[35px] gap-[12px]">
                    <button class="decreaseQuantity">
                        <img src="./icon/MINUS_CIRCLE.png" class="w-[16px] h-[16px]">
                    </button>
                    <div class="flex justify-center items-center w-[52px] h-[35px] border-2 rounded-[10px] border-gray text-[20px] font-syne font-[400] text-gray quantityDisplay">1</div>
                    <button class="increaseQuantity">
                        <img src="./icon/PLUS_CIRCLE.png" class="w-[16px] h-[16px]">
                    </button>
                </div>

            </div>

            <div class="pt-[23px] flex flex-col sm:flex-row justify-between items-center gap-[16px]">
                <a href="#" id="addToCartBtn" class="relative w-full sm:w-1/2 justify-center items-center h-[46px] flex border-[2px] bg-yellow rounded-[20px] border-gray">
                    <img src="./icon/SHOPPINGCART.png" class="w-[26px] h-[25px]">
                </a>

                <a href="#" id="openForm" class="btn-open-modal relative w-full sm:w-1/2 justify-center items-center h-[46px] flex border-[2px] bg-orange-500 rounded-[20px] border-gray">
                    <p class="text-gray font-syne text-[20px] font-[400]">Buy Now</p>
                </a>

                <!-- –ó–ê–î–ù–Ü–ô –§–û–ù + –ú–û–î–ê–õ–ö–ê -->

                <div id="modalOverlay" class="fixed flex justify-center items-center inset-0  hidden z-[200] transition-opacity duration-300">
                    <div id="modalContent" class="relative bg-white p-6  rounded-xl shadow-lg  scale-95 opacity-0 transition-all duration-300">
                        <button id="closeForm" class="absolute top-4 right-4 text-gray-500 hover:text-black text-xl font-bold">&times;</button>
                        <form id="orderForm">
                            <h2 class="text-2xl font-semibold mb-4 font-syne">ORDER FORM</h2>
                            <div class="flex pb-[10px] flex-col lg:flex-row xs:justify-center lg:justify-between  ">
                                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç (–ª—ñ–≤–æ—Ä—É—á) -->
                                <div id="modalBookPreview" class="xs:w-[300px] lg:w-1/2 mt-4 bg-gray-100 rounded p-4  overflow-hidden lg:max-h-[500px] xs:max-h-[200px]" >
                                    <!-- –¢—É—Ç –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–Ω–∏–≥–∏ –∞–±–æ —ñ–Ω—à–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
                                    <p>Book preview goes here</p>
                                </div>

                                <!-- –§–æ—Ä–º–∞ (–ø—Ä–∞–≤–æ—Ä—É—á) -->
                                <div class="xs:w-full lg:w-1/2 flex flex-col lg:pl-[30px] xs:pl-0 gap-[10px] ">
                                    <div class="flex flex-col">
                                        <label for="firstName1" class="block mb-1 font-syne border-t-[2px]">Name:</label>
                                        <input type="text" id="firstName" name="firstName" class="border lg:p-2 xs:p-1.5 rounded " required placeholder="your name">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="lastName1" class="block mb-1 font-syne">Surname:</label>
                                        <input type="text" id="lastName" name="lastName" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your surname">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="email1" class="block mb-1 font-syne">Email:</label>
                                        <input type="email" id="email" name="email" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your email">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="phone1" class="block mb-1 font-syne">Phone number:</label>
                                        <input type="tel" id="phone" name="phone" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your phone number">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="address1" class="block mb-1 font-syne">Address:</label>
                                        <input type="text" id="address" name="address" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your address">
                                    </div>

                                    <div class="flex flex-col ">
                                        <label for="message1" class="block mb-1 font-syne">Notes:</label>
                                        <textarea id="message" name="message" class="border lg:p-2 xs:p-1.5 rounded" rows="2" placeholder="write additional notes"></textarea>
                                    </div>
                                </div>

                            </div>

                            <!-- –ö–Ω–æ–ø–∫–∞ -->
                            <button type="submit" class=" order-btn leading-[1.2] border-black border-[2px] bg-orange-500 text-white px-4 py-2 rounded-[2] w-full" style="display: flex; border: 2px solid black; border-radius: 20px; justify-content: center; align-items: center; color: black; font-size: 20px ">Place an order</button>
                        </form>


                        <!-- –ü—ñ—Å–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ -->
                        <p id="successMsg" class="hidden flex justify-center text-green-600 font-syne font-semibold text-[30px] mt-4">Order accepted ‚úÖ</p>
                    </div>
                </div>

                <!-- –¥–ª—è –¥—Ä—É–≥–æ—ó —Ñ–æ—Ä–º–∏-->
                <div id="modalOverlay1" class="fixed flex justify-center items-center inset-0  hidden z-[200] transition-opacity duration-300">
                    <div id="modalContent1" class="relative bg-white p-6  rounded-xl shadow-lg  scale-95 opacity-0 transition-all duration-300">
                        <button id="closeForm1" class="absolute top-4 right-4 text-gray-500 hover:text-black text-xl font-bold">&times;</button>
                        <form id="orderForm1">
                            <h2 class="text-2xl font-semibold mb-4 font-syne">ORDER FORM</h2>
                            <div class="flex pb-[10px] flex-col lg:flex-row xs:justify-center lg:justify-between  ">
                                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç (–ª—ñ–≤–æ—Ä—É—á) -->
                                <div id="modalBookPreview1" class="xs:w-[300px] lg:w-1/2 mt-4 bg-gray-100 rounded p-4 overflow-y-auto lg:max-h-[500px] xs:max-h-[200px]" >
                                    <!-- –¢—É—Ç –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–Ω–∏–≥–∏ –∞–±–æ —ñ–Ω—à–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
                                    <p>Book preview goes here</p>
                                </div>

                                <!-- –§–æ—Ä–º–∞ (–ø—Ä–∞–≤–æ—Ä—É—á) -->
                                <div class="xs:w-full lg:w-1/2 flex flex-col lg:pl-[30px] xs:pl-0 gap-[10px] ">
                                    <div class="flex flex-col">
                                        <label for="firstName1" class="block mb-1 font-syne border-t-[2px]">Name:</label>
                                        <input type="text" id="firstName1" name="firstName" class="border lg:p-2 xs:p-1.5 rounded " required placeholder="your name">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="lastName1" class="block mb-1 font-syne">Surname:</label>
                                        <input type="text" id="lastName1" name="lastName" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your surname">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="email1" class="block mb-1 font-syne">Email:</label>
                                        <input type="email" id="email1" name="email" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your email">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="phone1" class="block mb-1 font-syne">Phone number:</label>
                                        <input type="tel" id="phone1" name="phone" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your phone number">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="address1" class="block mb-1 font-syne">Address:</label>
                                        <input type="text" id="address1" name="address" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your address">
                                    </div>

                                    <div class="flex flex-col ">
                                        <label for="message1" class="block mb-1 font-syne">Notes:</label>
                                        <textarea id="message1" name="message" class="border lg:p-2 xs:p-1.5 rounded" rows="2" placeholder="write additional notes"></textarea>
                                    </div>
                                </div>

                            </div>

                            <!-- –ö–Ω–æ–ø–∫–∞ -->
                            <button type="submit" class=" order-btn leading-[1.2] border-black border-[2px] bg-orange-500 text-white px-4 py-2 rounded-[2] w-full" style="display: flex; border: 2px solid black; border-radius: 20px; justify-content: center; align-items: center; color: black; font-size: 20px ">Place an order</button>
                        </form>


                        <!-- –ü—ñ—Å–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ -->
                        <p id="successMsg1" class="hidden flex justify-center text-green-600 font-syne font-semibold text-[30px] mt-4">Order accepted ‚úÖ</p>
                    </div>
                </div>


            </div>
        </div>
    </div>


    <div class="pt-[162px]">
        <div class="flex gap-[12px] justify-start items-center">
            <img src="./icon/Path%20(2).png" class="w-[26px] h-[21px]">
            <p class="text-[36px] font-[400] text-gray font-unica leading-[1.2]">View More</p>
        </div>
    </div>

    <div class="flex justify-center items-center pt-[162px] ">
        <div  class="w-full h-[410px] border-2 border-dashed overflow-x-auto border-gray-400 rounded-[20px] px-4 flex justify-around items-center">
            <div id="booksGenre"  class="flex min-w-max gap-[100px]">

                <div class="border-2 rounded-[10px] bg-gray-300 w-[187px] h-[279px] flex-shrink-0 shadow-myshadow"></div>
                <div class="border-2 rounded-[10px] bg-gray-300 w-[187px] h-[279px] flex-shrink-0 shadow-myshadow"></div>
                <div class="border-2 rounded-[10px] bg-gray-300 w-[187px] h-[279px] flex-shrink-0 shadow-myshadow"></div>
                <div class="border-2 rounded-[10px] bg-gray-300 w-[187px] h-[279px] flex-shrink-0 shadow-myshadow"></div>
                <div class="border-2 rounded-[10px] bg-gray-300 w-[187px] h-[279px] flex-shrink-0 shadow-myshadow"></div>
            </div>
        </div>
    </div>



    <section class="pt-[220px] w-full">
        <div>

            <div class="w-full border-b-2 border-dashed border-lightGray"></div>

            <div class="pt-[44px] flex md:justify-between items-center gap-[24px] justify-center pb-[100px] flex-col sm:flex-row  sm:items-center">
                <p class="text-[20px] font-syne font-[400] text-lightGray leading-[1.2] mb-4 sm:mb-0">BookStore Project</p>
                <div class="flex gap-[24px]  flex-row items-start">
                    <a href="https://www.linkedin.com/in/%D0%B2%D1%96%D0%BA%D1%82%D0%BE%D1%80%D1%96%D1%8F-%D1%82%D0%BE%D0%BB%D1%81%D1%82%D0%B0%D1%8F-11038a356/" class="relative block w-[48px] h-[48px]">
                        <div class="flex justify-center items-center w-[48px] h-[48px] border-2 border-lightGray rounded-[100px] z-10 bg-white">
                            <img src="./icon/LINKEDINLOGO.png" class="w-[23px] h-[23px] ">
                        </div>
                        <div class="absolute top-[5px] left-[4px] w-[48px] h-[48px] bg-sky-500 rounded-[100px] -z-10"></div>
                    </a>

                    <a href="https://github.com/Vviktoriyya" class="relative block w-[48px] h-[48px]">
                        <div class="flex justify-center items-center w-[48px] h-[48px] border-2 border-lightGray rounded-[100px] z-10 bg-white">
                            <img src="./icon/GITHUBLOGO.png" class="w-[22px] h-[25px] ">
                        </div>
                        <div class="absolute top-[5px] left-[4px] w-[48px] h-[48px] bg-sky-500 rounded-[100px] -z-10"></div>
                    </a>

                    <a href="https://www.figma.com/design/8GbCwAfp9NLq1zWIAgZPpo/BookStore--Short-Project---Community-?node-id=63-2407&p=f&t=KYnPaKQ8ZJHXLu4e-0" class="relative block w-[48px] h-[48px]">
                        <div class="flex justify-center items-center w-[48px] h-[48px] border-2 border-lightGray rounded-[100px] z-10 bg-white">
                            <img src="./icon/FIGMALOGO.png" class="w-[17px] h-[26px] ">
                        </div>
                        <div class="absolute top-[5px] left-[4px] w-[48px] h-[48px] bg-sky-500 rounded-[100px] -z-10"></div>
                    </a>
                </div>
                <p class=" text-[20px] font-syne font-[400] text-lightGray leading-[1.2] mt-4 sm:mt-0">by viktoriya tolstaya</p>
            </div>
        </div>

    </section>


</div>

<script>
    document.querySelectorAll('input[name="firstName"], input[name="lastName"]').forEach(input => {
        input.addEventListener('input', function () {
            this.value = this.value.replace(/[^a-zA-Z–∞-—è–ê-–Ø—ë–Å]/g, '');
        });
    });

    document.querySelectorAll('input[name="phone"]').forEach(input => {
        input.addEventListener('input', function () {
            // –ó–∞–º—ñ–Ω—è—î–º–æ –≤—Å–µ, —â–æ –Ω–µ —î —Ü–∏—Ñ—Ä–∞–º–∏
            this.value = this.value.replace(/[^0-9]/g, '');
        });
    });

    async function fetchAndDisplaySearchedBooks(query, containerId) {
        const container = document.getElementById(containerId);
        if (!container) {
            console.error(`–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑ ID "${containerId}" –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.`);
            return;
        }

        try {
            const currentBookGenre = query;
            if (!currentBookGenre) {
                container.innerHTML = '<p>–ñ–∞–Ω—Ä –¥–ª—è –ø–æ—à—É–∫—É –Ω–µ –≤–∫–∞–∑–∞–Ω–æ.</p>';
                return;
            }

            // –°–ø—Ä–æ—â–µ–Ω–∏–π –∑–∞–ø–∏—Ç - —à—É–∫–∞—î–º–æ –∫–Ω–∏–≥–∏ –∑–∞ –∂–∞–Ω—Ä–æ–º (subject)
            const response = await fetch(`https://openlibrary.org/search.json?subject=${encodeURIComponent(currentBookGenre)}&limit=10`);

            const data = await response.json();
            console.log('–û—Ç—Ä–∏–º–∞–Ω—ñ –¥–∞–Ω—ñ:', data);

            if (data.docs && data.docs.length > 0) {
                await renderBooks(data.docs, container);
            } else {
                // –°–ø—Ä–æ–±–∞ –∑–Ω–∞–π—Ç–∏ –∫–Ω–∏–≥–∏ –∑–∞ –±—ñ–ª—å—à –∑–∞–≥–∞–ª—å–Ω–∏–º –∑–∞–ø–∏—Ç–æ–º
                const fallbackResponse = await fetch(`https://openlibrary.org/search.json?q=${encodeURIComponent(currentBookGenre)}&limit=10`);
                const fallbackData = await fallbackResponse.json();

                if (fallbackData.docs && fallbackData.docs.length > 0) {
                    await renderBooks(fallbackData.docs, container);
                } else {
                    container.innerHTML = '<p>–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–Ω–∞–π—Ç–∏ –∫–Ω–∏–≥–∏ –∑–∞ —Ü–∏–º –∂–∞–Ω—Ä–æ–º.</p>';
                }
            }
        } catch (error) {
            console.error('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –∞–±–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—ñ –∫–Ω–∏–≥:', error);
            container.innerHTML = '<p>–í–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –∫–Ω–∏–≥.</p>';
        }
    }

    async function renderBooks(books, container) {
        container.innerHTML = '';
        const innerContainer = document.createElement('div');
        innerContainer.classList.add('flex', 'min-w-max', 'gap-[100px]');
        container.appendChild(innerContainer);

        for (const book of books) {
            const coverId = book.cover_i;
            const coverUrl = coverId ? `https://covers.openlibrary.org/b/id/${coverId}-M.jpg` : './img/bookk.jpg';
            const bookTitle = book.title;
            const bookAuthor = book.author_name ? book.author_name[0] : '–ù–µ–≤—ñ–¥–æ–º–∏–π –∞–≤—Ç–æ—Ä';
            const bookKey = book.key;
            const bookGenres = book.subject ? book.subject.slice(0, 2).join(', ') : '–ñ–∞–Ω—Ä –Ω–µ–≤—ñ–¥–æ–º–∏–π';

            const bookElement = document.createElement('div');
            bookElement.classList.add(
                'border-2', 'rounded-[10px]', 'bg-gray-300', 'w-[187px]', 'h-[320px]',
                'flex-shrink-0', 'shadow-myshadow', 'flex', 'flex-col', 'justify-between', 'p-2'
            );

            bookElement.innerHTML = `
            <img src="${coverUrl}" alt="${bookTitle} –æ–±–∫–ª–∞–¥–∏–Ω–∫–∞" class="rounded-t-[8px] w-full h-[200px] object-cover">
            <div class="p-2 flex flex-col justify-between h-full">
                <h3 class="text-gray-800 text-sm font-semibold overflow-hidden">${bookTitle}</h3>
                <p class="text-gray-600 text-xs overflow-hidden">${bookAuthor}</p>
                <p class="text-gray-500 text-[10px] mt-1 overflow-hidden">${bookGenres}</p>
                <a href="https://openlibrary.org${bookKey}" target="_blank" class="mt-2 text-blue-500 text-xs hover:underline">–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ</a>
            </div>
        `;
            innerContainer.appendChild(bookElement);
        }
    }
    document.addEventListener('DOMContentLoaded', () => {
        const urlParams = new URLSearchParams(window.location.search);
        const booksGeners = urlParams.get('booksGeners'); // –û—Ç—Ä–∏–º—É—î–º–æ –∂–∞–Ω—Ä
        console.log('–û—Ç—Ä–∏–º–∞–Ω–∏–π –∂–∞–Ω—Ä –∑ URL:', booksGeners);

        // –Ü–Ω—à—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∫–Ω–∏–≥–∏
        const img = urlParams.get('img');
        const title = urlParams.get('title');
        const author = urlParams.get('author');
        const description = urlParams.get('description');
        const price = urlParams.get('price');

        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–Ω–∏–≥—É
        if (img) document.getElementById('book-img').src = img;
        if (title) document.getElementById('book-title').textContent = title;
        if (author) document.getElementById('book-author').textContent = author;
        if (description) document.getElementById('book-description').textContent = description;
        document.getElementById('book-price').textContent = price ? `$${price}` : '$0.00';

        // –û–±—Ä–æ–±–∫–∞ –∂–∞–Ω—Ä—É –¥–ª—è –ø–æ—à—É–∫—É —Å—Ö–æ–∂–∏—Ö –∫–Ω–∏–≥
        const booksGenreContainer = document.getElementById('booksGenre');
        if (booksGenreContainer) {
            if (booksGeners) {
                fetchAndDisplaySearchedBooks(booksGeners, 'booksGenre');
            } else {
                console.log('–ñ–∞–Ω—Ä –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∂–∞–Ω—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º');
                // –ú–æ–∂–Ω–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∂–∞–Ω—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∞–±–æ –ø–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
                fetchAndDisplaySearchedBooks('fiction', 'booksGenre'); // –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —à—É–∫–∞—Ç–∏ 'fiction'
                // –ê–±–æ –ø–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:
                // booksGenreContainer.innerHTML = '<p>–ù–µ –≤–∫–∞–∑–∞–Ω–æ –∂–∞–Ω—Ä –¥–ª—è –ø–æ—à—É–∫—É —Å—Ö–æ–∂–∏—Ö –∫–Ω–∏–≥.</p>';
            }
        } else {
            console.error('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑ ID "booksGenre" –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.');
        }
    });



    fetch('./modal.html')
        .then(response => response.text())
        .then(html => {
            document.getElementById('modal-container').innerHTML = html;
            initializeModal();
        });

    function initializeModal() {
        const openSavedModalButton = document.getElementById('openSavedModal');
        const savedModal = document.getElementById('savedModal');
        const closeModalButton = document.getElementById('closeModal');
        const savedBooksList = document.getElementById('savedBooksList');
        const openCartModalButton = document.getElementById('openCartModal');
        const cartModal = document.getElementById('cartModal');
        const closeCartModalButton = document.getElementById('closeCartModal');

        savedModal.classList.add('hidden');
        cartModal.classList.add('hidden');

        // –ø–æ–¥—ñ—ó –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Ç–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª–∫–∏ –∫–æ—à–∏–∫–∞
        openCartModalButton.addEventListener('click', () => {
            cartModal.classList.remove('hidden');
            loadCartBooks();
        });

        closeCartModalButton.addEventListener('click', () => {
            cartModal.classList.add('hidden');
        });

        //  –ø–æ–¥—ñ—ó –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Ç–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª–∫–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –∫–Ω–∏–≥
        openSavedModalButton.addEventListener('click', () => {
            savedModal.classList.remove('hidden');
            loadSavedBooks();
        });

        closeModalButton.addEventListener('click', () => {
            savedModal.classList.add('hidden');
        });

        // –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó –∫–Ω–∏–≥–∏
        const saveButton = document.querySelector('.infoBook button');
        saveButton.addEventListener('click', () => {
            const bookImg = document.getElementById('book-img').src;
            const bookTitle = document.getElementById('book-title').innerText;
            const bookAuthor = document.getElementById('book-author').innerText;
            const bookPrice = document.getElementById('book-price').innerText;
            const bookCount = parseInt(document.getElementById('book-count').innerText); //–ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –≤ —á–∏—Å–ª–æ

            const bookData = {
                img: bookImg,
                title: bookTitle,
                author: bookAuthor,
                price: bookPrice,
                quantity: bookCount
            };

            let savedBooks = JSON.parse(localStorage.getItem('savedBooks')) || [];
            //—á–∏ —î –∫–Ω–∏–≥–∞
            const existingBook = savedBooks.find(book => book.title === bookTitle);

            if (existingBook) {
                // –Ø–∫—â–æ –∫–Ω–∏–≥–∞ –≤–∂–µ —î ‚Äî –¥–æ–¥–∞—î–º–æ –≤–∏–±—Ä–∞–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å
                existingBook.quantity += bookCount;
            } else {
                // –Ø–∫—â–æ –∫–Ω–∏–≥–∏ —â–µ –Ω–µ–º–∞—î ‚Äî –¥–æ–¥–∞—î–º–æ –Ω–æ–≤—É
                savedBooks.push(bookData);
            }

            localStorage.setItem('savedBooks', JSON.stringify(savedBooks));
            loadSavedBooks();
        });

    }

    document.getElementById('addToCartBtn')?.addEventListener('click', function (e) {
        e.preventDefault();

        const bookImg = document.getElementById('book-img').src;
        const bookTitle = document.getElementById('book-title').innerText;
        const bookAuthor = document.getElementById('book-author').innerText;
        const bookPrice = document.getElementById('book-price').innerText;
        const bookCount = parseInt(document.getElementById('book-count').innerText); // –∫—ñ–ª—å–∫—ñ—Å—Ç—å

        const bookData = {
            img: bookImg,
            title: bookTitle,
            author: bookAuthor,
            price: bookPrice,
            quantity: bookCount
        };

        let cartBooks = JSON.parse(localStorage.getItem('cartBooks')) || [];
        const existingBook = cartBooks.find(book => book.title === bookTitle);

        if (existingBook) {
            existingBook.quantity += bookCount;
        } else {
            cartBooks.push(bookData);
        }

        localStorage.setItem('cartBooks', JSON.stringify(cartBooks));

    });



    ///////////////////////////////////////////////////////////////////////////////  –∑–±–µ—Ä–µ–∂–µ–Ω—ñ
    function loadSavedBooks() {
        //–°–ø–∏—Å–æ–∫ –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –∫–Ω–∏–≥ –æ—Ç—Ä–∏–º—É—î—Ç—å—Å—è –∑ localStorage
        const savedBooksList = document.getElementById('savedBooksList');
        const savedBooks = JSON.parse(localStorage.getItem('savedBooks')) || [];
        if (!savedBooksList) {
            console.error('–ï–ª–µ–º–µ–Ω—Ç #savedBooksList –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!');
            return;
        }
        // –û—á–∏—â–∞—î–º–æ —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º —â–æ–± –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞—Ä–∏–π —Å–ø–∏—Å–æ–∫
        savedBooksList.innerHTML = '';

        if (savedBooks.length === 0) {
            savedBooksList.innerHTML = '' +
                '<div class="flex pt-[30px]">' +
                '<p class="font-syne pt-[20px] text-orange-500 text-[30px] font-500">The list is empty ‚òπÔ∏è</p></div>';
        } else {
            savedBooks.forEach(book => {
                const bookElement = document.createElement('div');
                bookElement.classList.add('flex', 'gap-[20px]', 'p-[10px]', 'mb-2');

                bookElement.innerHTML = `
<div class="border-gray pb-[40px] flex lg:p-[26px] xs:p-[10px] border-2 border-dashed rounded-[20px] lg:w-[416px] xs:w-[300px] xs:h-[150px] lg:h-[200px]">
    <div class="book border-2 rounded-[20px] lg:max-w-[103px] lg:h-[150px] xs:h-[114px] xs:max-w-[93px] bg-gray-300">
        <img src="${book.img}" alt="Book cover" class="rounded-[18px] lg:h-full xs:h-[110px] lg:max-w-[100px] xs:max-w-[90px]" />
    </div>
    <div class="flex flex-col">
        <div class="flex lg:gap-[40px] xs:gap-[15px] text-start">
            <div class="flex flex-col lg:gap-[12px] xs:gap-[6px]">
                <p class="scrollName flex pl-[31px] text-gray text-[18px] font-[400] leading-[1.2] font-syne">${book.title}</p>
                <p class="scrollAuthor flex pl-[31px] text-gray text-[16px] max-w-[90px] font-[400] leading-[1.2] font-syne">${book.author}</p>
            </div>
            <div class="text-orange text-[24px] pr-[20px] font-[400] font-syne leading-[1.2]">
                ${book.price}
            </div>
        </div>
        <div class="flex justify-end flex-col h-full lg:pt-[20px] xs:pt-[15px]">
            <div class="flex justify-between lg:gap-[40px] xs:gap-[10px]">
                <div class="flex relative items-center w-full lg:pl-[31px] xs:pl-[10px] lg:h-[35px] xs:h-[15px] lg:gap-[8px] xs:gap-[5px]">
                    <button class="decreaseQuantity xs:max-w-[15px]">
                        <img src="./icon/MINUS_CIRCLE.png" class="lg:w-[16px] xs:w-[40px] h-[16px]">
                    </button>
                    <div class="flex xs:max-w-[30px] lg:max-w-[80px] leading-[1.2] justify-center items-center w-[52px] lg:h-[35px] xs:h-[25px] border-2 rounded-[10px] border-gray lg:text-[18px] xs:text-[13px] font-syne font-[400] text-gray">
                        ${book.quantity}
                    </div>
                    <button class="increaseQuantity xs:max-w-[15px]">
                        <img src="./icon/PLUS_CIRCLE.png" class="lg:w-[16px] xs:w-[40px] h-[16px]">
                    </button>

                    <div class="pl-[10px] flex items-center gap-[8px]">
                        <button class="flex justify-center items-center w-[45px] h-[45px] removeBook">
                            <img src="./icon/TRASH.png" class="w-[28px] h-[30px]" alt="">
                        </button>
                        <button class="movecard flex justify-center items-center w-[45px] h-[45px] ">
                            <img src="./icon/SHOPPINGCART.png" class="w-[26px] h-[22px]" alt="">
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>`;



                // –î–æ–¥–∞–≤–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—É –≤ —Å–ø–∏—Å–æ–∫
                savedBooksList.appendChild(bookElement);

                // –î–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫–Ω–∏–≥–∏
                const removeButton = bookElement.querySelector('.removeBook');
                removeButton.addEventListener('click', () => {
                    const index = savedBooks.indexOf(book);
                    if (index > -1) {
                        savedBooks.splice(index, 1);
                        localStorage.setItem('savedBooks', JSON.stringify(savedBooks));
                        loadSavedBooks(); // –û–Ω–æ–≤–ª—é—î–º–æ —Å–ø–∏—Å–æ–∫
                    }
                });

                // —Ñ—É–Ω–∫—Ü—ñ–π –¥–ª—è –∑–º—ñ–Ω–∏ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –≤ –º–æ–¥–∞–ª—Ü—ñ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –∫–Ω–∏–≥–∏

                const increaseButton = bookElement.querySelector('.increaseQuantity');
                const decreaseButton = bookElement.querySelector('.decreaseQuantity');

                increaseButton.addEventListener('click', () => {
                    book.quantity++;
                    updateBookQuantity(book);
                    loadSavedBooks();
                });

                decreaseButton.addEventListener('click', () => {
                    if (book.quantity > 1) {
                        book.quantity--;
                        updateBookQuantity(book);
                        loadSavedBooks();
                    }
                });
                function showToast(message) {
                    const toast = document.getElementById('toast');
                    toast.innerText = message;
                    toast.classList.remove('hidden');
                    toast.classList.add('flex');

                    setTimeout(() => {
                        toast.classList.add('hidden');
                        toast.classList.remove('flex');
                    }, 3000);
                }

                // –î–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –∫–Ω–∏–≥–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É
                //–±–µ—Ä–µ–º –∫–Ω–æ–ø–∫—É
                const moveCardButton = bookElement.querySelector('.movecard');
                //–æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó –Ω–∞ –∫–Ω–æ–ø–∫—É
                moveCardButton.addEventListener('click', () => {
                    //—Ç—É—Ç —ñ–∑ localStorage –≤–∏—Ç—è–≥—É—é—Ç—å—Å—è –≤—Å—ñ –∫–Ω–∏–≥–∏, —â–æ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤ –∫–æ—à–∏–∫—É (—è–∫—â–æ –≤–æ–Ω–∏ —î
                    let cartBooks = JSON.parse(localStorage.getItem('cartBooks')) || [];

                    const existingCartBook = cartBooks.find(cartBook => cartBook.title === book.title);
                    //–û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∫–Ω–∏–≥–∏ –≤ –∫–æ—à–∏–∫—É –∞–±–æ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó
                    if (existingCartBook) {
                        existingCartBook.quantity += book.quantity;
                    } else {
                        cartBooks.push(book);
                    }

                    localStorage.setItem('cartBooks', JSON.stringify(cartBooks));
                    //–≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –∫–Ω–∏–≥–∞ –∑ –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö —è–∫–∞ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É
                    let savedBooks = JSON.parse(localStorage.getItem('savedBooks')) || [];
                    savedBooks = savedBooks.filter(savedBook => savedBook.title !== book.title);
                    localStorage.setItem('savedBooks', JSON.stringify(savedBooks));

                    loadSavedBooks();

                    showToast('The book moved to cart! üõí');
                });

            });
        }
    }
        //—Ü–µ –¥–ª—è –∑–º—ñ–Ω–∏ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É –ª–æ–∫–∞–ª —Å
    function updateBookQuantity(book) {
        let savedBooks = JSON.parse(localStorage.getItem('savedBooks')) || [];
        const bookIndex = savedBooks.findIndex(savedBook => savedBook.title === book.title);
        if (bookIndex > -1) {
            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ undefined –∞–±–æ null
            if (savedBooks[bookIndex].quantity === undefined || savedBooks[bookIndex].quantity === null) {
                savedBooks[bookIndex].quantity = 1;
            }
            savedBooks[bookIndex].quantity = book.quantity;
            localStorage.setItem('savedBooks', JSON.stringify(savedBooks));
        }
    }

    document.getElementById('myButton').addEventListener('click', function() {
        let button = this;

        button.classList.add('yellow-bg');


        setTimeout(function() {
            button.classList.remove('yellow-bg');
        }, 3000);
    });


    ///////////////////////////////////////////////////////////////////////////////  –∫–æ—à–∏–∫
    function loadCartBooks() {
        //–û—Ç—Ä–∏–º–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç–∞ –¥–ª—è —Å–ø–∏—Å–∫—É –∫–Ω–∏–≥ —É –∫–æ—à–∏–∫—É
        const cartBooksList = document.getElementById('cartBooksList');
        //localStorage.getItem('cartBooks') ‚Äî –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–Ω–∏–≥–∏ –≤ –∫–æ—à–∏–∫—É –∑ localStorage –∑–∞ –∫–ª—é—á–µ–º cartBooks.
        //JSON.parse() –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –æ—Ç—Ä–∏–º–∞–Ω–∏–π —Ä—è–¥–æ–∫ —É –º–∞—Å–∏–≤ –∞–±–æ –æ–±'—î–∫—Ç, —è–∫—â–æ —Ü–µ –±—É–ª–æ —Ä–∞–Ω—ñ—à–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –≤ —Ç–∞–∫–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ.
        const cartBooks = JSON.parse(localStorage.getItem('cartBooks')) || [];

        // –û—á–∏—â–∞—î–º–æ —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º
        cartBooksList.innerHTML = '';

        if (cartBooks.length === 0) {
            cartBooksList.innerHTML = '<div class="flex pt-[30px]"><p class="font-syne pt-[20px] text-orange-500 text-[30px] font-500">Your cart is empty üõí</p></div>';
        } else {
            let totalPrice = 0; // –ó–º—ñ–Ω–Ω–∞ –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É –∑–∞–≥–∞–ª—å–Ω–æ—ó —Ü—ñ–Ω–∏
            let totalQuantity = 0; // –ó–º—ñ–Ω–Ω–∞ –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É –∑–∞–≥–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∫–Ω–∏–≥

            cartBooks.forEach((book, index) => {
                const bookElement = document.createElement('div');
                bookElement.classList.add('flex', 'gap-[20px]', 'p-[10px]', 'mb-2');

                bookElement.innerHTML = `
<div class="border-gray pb-[40px]   flex lg:p-[26px] xs:p-[10px] border-2 border-dashed rounded-[20px] lg:w-[416px] xs:w-[300px] lg:h-[210px] xs:h-[150px]">
    <div class="book border-2 rounded-[20px] lg:max-w-[103px] lg:h-[150px] xs:h-[114px] xs:max-w-[93px] bg-gray-300">
        <img src="${book.img}" alt="Book cover" class="rounded-[18px] lg:h-full xs:h-[110px] lg:max-w-[100px] xs:max-w-[90px]" />
    </div>
    <div class="flex flex-col">
        <div class="flex lg:gap-[40px] xs:gap-[15px] text-start">
            <div class="flex flex-col lg:gap-[12px] xs:gap-[6px]">
                <p class="flex scrollName pl-[31px] text-gray text-[15px] font-[400] leading-[1.2] font-syne">${book.title}</p>
                <p class="flex scrollAuthor pl-[31px] text-gray text-[15px] font-[400] leading-[1.2] font-syne">${book.author}</p>
            </div>
            <div class="text-orange text-[24px] font-[400] font-syne leading-[1.2]">
                ${book.price}
            </div>
        </div>
        <div class="flex justify-end flex-col h-full lg:pt-[20px] xs:pt-[35px]">
            <div class="flex justify-between lg:gap-[150px] xs:gap-[60px]">
                <div class="flex relative items-center lg:pb-0 xs:pb-[52px] w-full lg:pl-[31px] xs:pl-[10px] lg:h-[35px] xs:h-[15px] lg:gap-[12px] xs:gap-[7px]">
                    <button class="decreaseQuantity xs:max-w-[15px]">
                        <img src="./icon/MINUS_CIRCLE.png" class="lg:w-[16px] xs:w-[40px] h-[16px]">
                    </button>
                    <div class="flex xs:max-w-[30px] lg:max-w-[80px] leading-[1.2] justify-center items-center w-[52px] lg:h-[35px] xs:h-[25px] border-2 rounded-[10px] border-gray lg:text-[18px] xs:text-[13px] font-syne font-[400] text-gray">
                        ${book.quantity}
                    </div>
                    <button class="increaseQuantity xs:max-w-[15px]">
                        <img src="./icon/PLUS_CIRCLE.png" class="lg:w-[16px] xs:w-[40px] h-[16px]">
                    </button>

                    <button class="flex justify-center  items-center w-[50px] h-[50px] removeBook" data-index="${index}">
                        <img src="./icon/TRASH.png" class="w-[30px] h-[32px]" alt="">
                     </button>

                </div>

            </div>
        </div>
    </div>

</div>
`;

                cartBooksList.appendChild(bookElement);

                const price = parseFloat(book.price.replace('$', ''));
                const quantity = parseInt(book.quantity);

                if (!isNaN(price) && !isNaN(quantity)) {
                    totalPrice += price * quantity;
                    totalQuantity += quantity;
                } else {
                    console.error(`—à–æ—Å—å –Ω–µ —á–∏—Å–ª–æ: ${book.title}`, book);
                }
            });

            // –í–∏–≤–µ–¥–µ–Ω–Ω—è –∑–∞–≥–∞–ª—å–Ω–æ—ó —Ü—ñ–Ω–∏ —Ç–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∫–Ω–∏–≥ –≤–Ω–∏–∑—É
            const totalElement = document.createElement('div');
            totalElement.classList.add('flex', 'justify-between', 'mt-2', 'p-2','gap-[20px]', 'border-t', 'border-gray-300');
            totalElement.innerHTML = `
<div class="flex flex-col">
 <div class="flex xs:gap-[30px] lg:gap-[120px]">
        <div class="font-syne text-[25px] flex items-center">
            <span class="font-syne text-[20px]">Books:</span> ${totalQuantity}
        </div>
        <div class="flex items-center ">
            <div class="font-syne text-[20px] pr-[15px]">Total price:</div>
            <div class="font-syne text-orange-500 font-bold text-[30px]">
                $${totalPrice.toFixed(2)}
            </div>
        </div>
    </div>
  </div>



`;

            cartBooksList.appendChild(totalElement);
        }
// –î–æ–¥–∞–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è —Ç–∞ –∑–º–µ–Ω—à–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ
        const decreaseButtons = document.querySelectorAll('.decreaseQuantity');
        decreaseButtons.forEach((button, index) => {
            button.addEventListener('click', () => {
                updateQuantity(index, -1);
            });
        });

        const increaseButtons = document.querySelectorAll('.increaseQuantity');
        increaseButtons.forEach((button, index) => {
            button.addEventListener('click', () => {
                updateQuantity(index, 1);
            });
        });
// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∫–Ω–∏–≥–∏ –≤ –º–æ–¥–∞–ª—Ü—ñ –≤  –∫–æ—à–∏–∫—É
        function updateQuantity(index, change) {
            const cartBooks = JSON.parse(localStorage.getItem('cartBooks')) || [];
            if (cartBooks[index]) {
                const newQuantity = Math.max(1, parseInt(cartBooks[index].quantity) + change);
                if (!isNaN(newQuantity)) {
                    cartBooks[index].quantity = newQuantity;
                    localStorage.setItem('cartBooks', JSON.stringify(cartBooks));
                    loadCartBooks(); // –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∫–æ—à–∏–∫ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–º—ñ–Ω
                    // –û–Ω–æ–≤–ª—é—î–º–æ –¥–∞–Ω—ñ –ø—Ä–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤ localStorage 'savedBooks', —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
                    updateSavedBooksQuantity(cartBooks[index]);
                } else {
                    console.error(`–ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ.`);
                }
            }
        }
// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –≤ 'savedBooks'
        function updateSavedBooksQuantity(updatedBook) {
            let savedBooks = JSON.parse(localStorage.getItem('savedBooks')) || [];
            const savedBookIndex = savedBooks.findIndex(book => book.title === updatedBook.title);
            if (savedBookIndex > -1) {
                savedBooks[savedBookIndex].quantity = updatedBook.quantity;
                localStorage.setItem('savedBooks', JSON.stringify(savedBooks));
            }
        }


        // –î–æ–¥–∞–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—è
        const removeButtons = document.querySelectorAll('.removeBook');
        removeButtons.forEach(button => {
            button.addEventListener('click', () => {
                const index = button.getAttribute('data-index'); // –æ—Ç—Ä–∏–º—É—î–º–æ —ñ–Ω–¥–µ–∫—Å –∫–Ω–∏–≥–∏
                removeBookFromCart(index);
            });
        });
    }

    // —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–º—ñ–Ω–∏ –∫—ñ—å–∫–æ—Å—Ç—ñ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –ø—ñ–¥ –∫–Ω–∏–≥–æ—é

   function updateQuantity(button, change) {
        const bookElement = button.closest('.flex'); // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –µ–ª–µ–º–µ–Ω—Ç
        const quantityElement = bookElement.querySelector('.quantityDisplay'); // –û–Ω–æ–≤–ª—é—î–º–æ –µ–ª–µ–º–µ–Ω—Ç –∫—ñ–ª—å–∫–æ—Å—Ç—ñ
        let quantity = parseInt(quantityElement.innerText);

        // –Ω–æ–≤–ª—é—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å
        quantity += change;

        if (quantity < 1) {
            quantity = 1;
        }

        // –û–Ω–æ–≤–ª—é—î–º–æ —Ç–µ–∫—Å—Ç –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
        quantityElement.innerText = quantity.toString();

        // –û–Ω–æ–≤–ª—é—î–º–æ localStorage –¥–ª—è –∫–æ—à–∏–∫–∞
        const cartBooks = JSON.parse(localStorage.getItem('cartBooks')) || [];
        const index = [...bookElement.parentElement.children].indexOf(bookElement);
        cartBooks[index].quantity = quantity;
        localStorage.setItem('cartBooks', JSON.stringify(cartBooks));

        // –û–Ω–æ–≤–ª—é—î–º–æ –≤ 'savedBooks'
        const bookTitle = cartBooks[index].title;
        updateSavedBooksQuantity({
            title: bookTitle,
            quantity: quantity
        });


        loadCartBooks();
    }



    // –§—É–Ω–∫—Ü—ñ—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫–Ω–∏–≥–∏ –∑ –∫–æ—à–∏–∫–∞
    function removeBookFromCart(index) {
        const cartBooks = JSON.parse(localStorage.getItem('cartBooks')) || [];

        //–≤–∏–¥–∞–ª—è—î–º–æ –∫–Ω–∏–≥—É –∑ –º–∞—Å–∏–≤—É
        const updatedCartBooks = cartBooks.filter((book, i) => i !== parseInt(index));

        // –æ–Ω–æ–≤–ª—é—î–º–æ localStorage
        localStorage.setItem('cartBooks', JSON.stringify(updatedCartBooks));

        //  –æ–Ω–æ–≤–ª–µ–Ω–∏–π –∫–æ—à–∏–∫
        loadCartBooks();
    }
    document.addEventListener('DOMContentLoaded', function() {
        //  –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –¥–æ –∫–Ω–æ–ø–æ–∫ –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        document.querySelectorAll('.decreaseQuantity').forEach(button => {
            button.addEventListener('click', () => updateQuantity(button, -1));
        });

        document.querySelectorAll('.increaseQuantity').forEach(button => {
            button.addEventListener('click', () => updateQuantity(button, 1));
        });
    });
    document.getElementById('cartIcon').addEventListener('click', () => {
        document.getElementById('cartModal').classList.remove('hidden');
        loadCartBooks(); // <- –æ—Å—å —Ç—É—Ç –≤–∏–∫–ª–∏–∫–∞—î–º–æ!
    });

    window.addEventListener('DOMContentLoaded', loadSavedBooks);

    loadCartBooks();





</script>


<script src="./app.js"></script>
<script src="./formOneBook.js"></script>
<script src="./formAllBooks.js"></script>

</body>
</html>