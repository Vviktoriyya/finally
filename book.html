<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BookStore - Your Online Bookstore</title>
    <meta name="description" content="BookStore - A wide selection of books in various genres. Buy the most popular and new books online.">
    <link href="./output.css" rel="stylesheet">


    <link href="https://fonts.googleapis.com/css2?family=Unica+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
        }

        html, body {
            overflow: scroll;
            scrollbar-width: none;
        }


        .scrollAuthor{
            overflow: scroll;
            scrollbar-width: none;
            max-height: 40px;
            max-width: 100px;
        }
        .scrollName{
            overflow: scroll;
            scrollbar-width: none;
            max-height: 40px;
            max-width: 90px;
        }
        #modalOverlay {
            background-color: rgba(0, 0, 0, 0.62);
        }
        #modalOverlay1 {
            background-color: rgba(0, 0, 0, 0.62);
        }

    </style>
</head>

<body>

<div class="w-full mx-auto pt-[60px] px-[20px] sm:px-[50px] md:px-[50px] lg:px-[110px] xxl:px-[170px]">
    <div class="header flex justify-between  ">
        <a href="index.html" class="logo flex justify-between items-center gap-[12px] ">
            <img src="./icon/BookLogoOpen.png" class="w-[26px] h-[22px]">
            <p class="font-unica text-[20px]">BOOKStore</p>
        </a>
        <div class="buttons flex gap-[20px]">
            <button id="openSavedModal" >
                <img src="./icon/SaveChoose.png" class="w-[16px] h-[23px] ">
            </button>
            <button id="openCartModal" class="open-cart-button">
                <img src="./icon/SHOPPINGCART.png" class="w-[27px] h-[24px]">
            </button>
        </div>
    </div>

    <!-- Бокова модалка справа -->
    <div id="modal-container"></div>

    <div class="flex flex-col xl:flex-row justify-between gap-[100px] lg:gap-[150px] px-[20px] xxl:px-[200px] xl:px-[150px] pt-[100px] lg:pt-[110px] lg:items-center">
        <div class="w-full lg:w-[280px] h-[417px] pt-[22px]">
            <div class="book border-2  rounded-[10px] bg-gray-300 flex-shrink-0 shadow-lg sm:h-full xs:h-[380px] sm:w-[280px] xs:w-[250px] overflow-hidden mx-auto">
                <img id="book-img" alt="Book cover" class=" w-full h-full rounded-[10px]" />
            </div>
        </div>


        <div class="infoBook w-full">
            <div class="w-full  flex sm:justify-between xs:justify-center items-center flex-wrap gap-2">
                <p id="book-title" class="font-unica text-[36px] font-[400] text-gray"></p>
                <button id="myButton" class="flex justify-center items-center border-2 rounded-[20px] border-gray w-[57px] yellow-bg bg-white hover:bg-yellow h-[46px]">
                    <img src="./icon/SaveChoose.png" class="w-[13px] h-[18px]">
                </button>

            </div>
            <div id="savedBooksList"></div>

            <div class="relative w-full pt-[19px] flex items-center h-[66px]">
                <div class="absolute left-0 right-0 bg-lightGray bottom-[-17px] h-[64px] rounded-[20px] z-[-1]"></div>
                <div id="book-author" class="text-gray relative right-[9px] bg-white font-syne h-[64px] border-[2px] border-dashed border-gray-300 px-[20px] py-[13px] rounded-[20px] text-[14px] w-full">
                </div>
            </div>

            <div class="h-[30px]"></div>
            <div class="relative w-full max-h-[165px]">
                <div class="absolute left-0 right-0 bg-lightGray bottom-[-8px] h-[165px] rounded-[20px] z-[-1]"></div>
                <div id="book-description" class="text-gray relative right-[9px] bg-white font-syne h-[165px] border-[2px] border-dashed border-gray-300 px-[20px] py-[13px] rounded-[20px] text-[14px] w-full overflow-y-auto scrollbar-none">
                    <!-- Опис книги з'явиться тут -->
                </div>
            </div>

            <div class="pt-[30px] lg:pt-[50px] w-full flex justify-between flex-wrap gap-4 items-center">
                <div class="text-Orange text-[28px] lg:text-[36px] font-[400] font-syne leading-[1.2]" id="book-price">

                </div>
                <div id="book-count" class="flex w-[104px] h-[35px] gap-[12px]">
                    <button class="decreaseQuantity">
                        <img src="./icon/MINUS_CIRCLE.png" class="w-[16px] h-[16px]">
                    </button>
                    <div class="flex justify-center items-center w-[52px] h-[35px] border-2 rounded-[10px] border-gray text-[20px] font-syne font-[400] text-gray quantityDisplay">1</div>
                    <button class="increaseQuantity">
                        <img src="./icon/PLUS_CIRCLE.png" class="w-[16px] h-[16px]">
                    </button>
                </div>

            </div>

            <div class="pt-[23px] flex flex-col sm:flex-row justify-between items-center gap-[16px]">
                <a href="#" id="addToCartBtn" class="relative w-full sm:w-1/2 justify-center items-center h-[46px] flex border-[2px] bg-yellow rounded-[20px] border-gray">
                    <img src="./icon/SHOPPINGCART.png" class="w-[26px] h-[25px]">
                </a>

                <a href="#" id="openForm" class="btn-open-modal relative w-full sm:w-1/2 justify-center items-center h-[46px] flex border-[2px] bg-orange-500 rounded-[20px] border-gray">
                    <p class="text-gray font-syne text-[20px] font-[400]">Buy Now</p>
                </a>

                <!-- ЗАДНІЙ ФОН + МОДАЛКА -->

                <div id="modalOverlay" class="fixed flex justify-center items-center inset-0  hidden z-[200] transition-opacity duration-300">
                    <div id="modalContent" class="relative bg-white p-6  rounded-xl shadow-lg  scale-95 opacity-0 transition-all duration-300">
                        <button id="closeForm" class="absolute top-4 right-4 text-gray-500 hover:text-black text-xl font-bold">&times;</button>
                        <form id="orderForm">
                            <h2 class="text-2xl font-semibold mb-4 font-syne">ORDER FORM</h2>
                            <div class="flex pb-[10px] flex-col lg:flex-row xs:justify-center lg:justify-between  ">
                                <!-- Контент (ліворуч) -->
                                <div id="modalBookPreview" class="xs:w-[300px] lg:w-1/2 mt-4 bg-gray-100 rounded p-4  overflow-hidden lg:max-h-[500px] xs:max-h-[200px]" >
                                    <!-- Тут зображення книги або інший контент -->
                                    <p>Book preview goes here</p>
                                </div>

                                <!-- Форма (праворуч) -->
                                <div class="xs:w-full lg:w-1/2 flex flex-col lg:pl-[30px] xs:pl-0 gap-[10px] ">
                                    <div class="flex flex-col">
                                        <label for="firstName1" class="block mb-1 font-syne border-t-[2px]">Name:</label>
                                        <input type="text" id="firstName" name="firstName" class="border lg:p-2 xs:p-1.5 rounded " required placeholder="your name">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="lastName1" class="block mb-1 font-syne">Surname:</label>
                                        <input type="text" id="lastName" name="lastName" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your surname">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="email1" class="block mb-1 font-syne">Email:</label>
                                        <input type="email" id="email" name="email" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your email">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="phone1" class="block mb-1 font-syne">Phone number:</label>
                                        <input type="tel" id="phone" name="phone" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your phone number">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="address1" class="block mb-1 font-syne">Address:</label>
                                        <input type="text" id="address" name="address" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your address">
                                    </div>

                                    <div class="flex flex-col ">
                                        <label for="message1" class="block mb-1 font-syne">Notes:</label>
                                        <textarea id="message" name="message" class="border lg:p-2 xs:p-1.5 rounded" rows="2" placeholder="write additional notes"></textarea>
                                    </div>
                                </div>

                            </div>

                            <!-- Кнопка -->
                            <button type="submit" class=" order-btn leading-[1.2] border-black border-[2px] bg-orange-500 text-white px-4 py-2 rounded-[2] w-full" style="display: flex; border: 2px solid black; border-radius: 20px; justify-content: center; align-items: center; color: black; font-size: 20px ">Place an order</button>
                        </form>


                        <!-- Після відправки -->
                        <p id="successMsg" class="hidden flex justify-center text-green-600 font-syne font-semibold text-[30px] mt-4">Order accepted ✅</p>
                    </div>
                </div>

                <!-- для другої форми-->
                <div id="modalOverlay1" class="fixed flex justify-center items-center inset-0  hidden z-[200] transition-opacity duration-300">
                    <div id="modalContent1" class="relative bg-white p-6  rounded-xl shadow-lg  scale-95 opacity-0 transition-all duration-300">
                        <button id="closeForm1" class="absolute top-4 right-4 text-gray-500 hover:text-black text-xl font-bold">&times;</button>
                        <form id="orderForm1">
                            <h2 class="text-2xl font-semibold mb-4 font-syne">ORDER FORM</h2>
                            <div class="flex pb-[10px] flex-col lg:flex-row xs:justify-center lg:justify-between  ">
                                <!-- Контент (ліворуч) -->
                                <div id="modalBookPreview1" class="xs:w-[300px] lg:w-1/2 mt-4 bg-gray-100 rounded p-4 overflow-y-auto lg:max-h-[500px] xs:max-h-[200px]" >
                                    <!-- Тут зображення книги або інший контент -->
                                    <p>Book preview goes here</p>
                                </div>

                                <!-- Форма (праворуч) -->
                                <div class="xs:w-full lg:w-1/2 flex flex-col lg:pl-[30px] xs:pl-0 gap-[10px] ">
                                    <div class="flex flex-col">
                                        <label for="firstName1" class="block mb-1 font-syne border-t-[2px]">Name:</label>
                                        <input type="text" id="firstName1" name="firstName" class="border lg:p-2 xs:p-1.5 rounded " required placeholder="your name">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="lastName1" class="block mb-1 font-syne">Surname:</label>
                                        <input type="text" id="lastName1" name="lastName" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your surname">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="email1" class="block mb-1 font-syne">Email:</label>
                                        <input type="email" id="email1" name="email" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your email">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="phone1" class="block mb-1 font-syne">Phone number:</label>
                                        <input type="tel" id="phone1" name="phone" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your phone number">
                                    </div>

                                    <div class="flex flex-col">
                                        <label for="address1" class="block mb-1 font-syne">Address:</label>
                                        <input type="text" id="address1" name="address" class="border lg:p-2 xs:p-1.5 rounded" required placeholder="your address">
                                    </div>

                                    <div class="flex flex-col ">
                                        <label for="message1" class="block mb-1 font-syne">Notes:</label>
                                        <textarea id="message1" name="message" class="border lg:p-2 xs:p-1.5 rounded" rows="2" placeholder="write additional notes"></textarea>
                                    </div>
                                </div>

                            </div>

                            <!-- Кнопка -->
                            <button type="submit" class=" order-btn leading-[1.2] border-black border-[2px] bg-orange-500 text-white px-4 py-2 rounded-[2] w-full" style="display: flex; border: 2px solid black; border-radius: 20px; justify-content: center; align-items: center; color: black; font-size: 20px ">Place an order</button>
                        </form>


                        <!-- Після відправки -->
                        <p id="successMsg1" class="hidden flex justify-center text-green-600 font-syne font-semibold text-[30px] mt-4">Order accepted ✅</p>
                    </div>
                </div>


            </div>
        </div>
    </div>


    <div class="pt-[162px]">
        <div class="flex gap-[12px] justify-start items-center">
            <img src="./icon/Path%20(2).png" class="w-[26px] h-[21px]">
            <p class="text-[36px] font-[400] text-gray font-unica leading-[1.2]">View More</p>
        </div>
    </div>

    <div class="flex justify-center items-center pt-[162px] ">
        <div  class="w-full h-[410px] border-2 border-dashed overflow-x-auto border-gray-400 rounded-[20px] px-4 flex justify-around items-center">
            <div id="booksGenre"  class="flex min-w-max gap-[100px]">

                <div class="border-2 rounded-[10px] bg-gray-300 w-[187px] h-[279px] flex-shrink-0 shadow-myshadow"></div>
                <div class="border-2 rounded-[10px] bg-gray-300 w-[187px] h-[279px] flex-shrink-0 shadow-myshadow"></div>
                <div class="border-2 rounded-[10px] bg-gray-300 w-[187px] h-[279px] flex-shrink-0 shadow-myshadow"></div>
                <div class="border-2 rounded-[10px] bg-gray-300 w-[187px] h-[279px] flex-shrink-0 shadow-myshadow"></div>
                <div class="border-2 rounded-[10px] bg-gray-300 w-[187px] h-[279px] flex-shrink-0 shadow-myshadow"></div>
            </div>
        </div>
    </div>



    <section class="pt-[220px] w-full">
        <div>

            <div class="w-full border-b-2 border-dashed border-lightGray"></div>

            <div class="pt-[44px] flex md:justify-between items-center gap-[24px] justify-center pb-[100px] flex-col sm:flex-row  sm:items-center">
                <p class="text-[20px] font-syne font-[400] text-lightGray leading-[1.2] mb-4 sm:mb-0">BookStore Project</p>
                <div class="flex gap-[24px]  flex-row items-start">
                    <a href="https://www.linkedin.com/in/%D0%B2%D1%96%D0%BA%D1%82%D0%BE%D1%80%D1%96%D1%8F-%D1%82%D0%BE%D0%BB%D1%81%D1%82%D0%B0%D1%8F-11038a356/" class="relative block w-[48px] h-[48px]">
                        <div class="flex justify-center items-center w-[48px] h-[48px] border-2 border-lightGray rounded-[100px] z-10 bg-white">
                            <img src="./icon/LINKEDINLOGO.png" class="w-[23px] h-[23px] ">
                        </div>
                        <div class="absolute top-[5px] left-[4px] w-[48px] h-[48px] bg-sky-500 rounded-[100px] -z-10"></div>
                    </a>

                    <a href="https://github.com/Vviktoriyya" class="relative block w-[48px] h-[48px]">
                        <div class="flex justify-center items-center w-[48px] h-[48px] border-2 border-lightGray rounded-[100px] z-10 bg-white">
                            <img src="./icon/GITHUBLOGO.png" class="w-[22px] h-[25px] ">
                        </div>
                        <div class="absolute top-[5px] left-[4px] w-[48px] h-[48px] bg-sky-500 rounded-[100px] -z-10"></div>
                    </a>

                    <a href="https://www.figma.com/design/8GbCwAfp9NLq1zWIAgZPpo/BookStore--Short-Project---Community-?node-id=63-2407&p=f&t=KYnPaKQ8ZJHXLu4e-0" class="relative block w-[48px] h-[48px]">
                        <div class="flex justify-center items-center w-[48px] h-[48px] border-2 border-lightGray rounded-[100px] z-10 bg-white">
                            <img src="./icon/FIGMALOGO.png" class="w-[17px] h-[26px] ">
                        </div>
                        <div class="absolute top-[5px] left-[4px] w-[48px] h-[48px] bg-sky-500 rounded-[100px] -z-10"></div>
                    </a>
                </div>
                <p class=" text-[20px] font-syne font-[400] text-lightGray leading-[1.2] mt-4 sm:mt-0">by viktoriya tolstaya</p>
            </div>
        </div>

    </section>


</div>

<script>
    document.querySelectorAll('input[name="firstName"], input[name="lastName"]').forEach(input => {
        input.addEventListener('input', function () {
            this.value = this.value.replace(/[^a-zA-Zа-яА-ЯёЁ]/g, '');
        });
    });

    document.querySelectorAll('input[name="phone"]').forEach(input => {
        input.addEventListener('input', function () {
            // Заміняємо все, що не є цифрами
            this.value = this.value.replace(/[^0-9]/g, '');
        });
    });

    async function fetchAndDisplaySearchedBooks(query, containerId) {
        const container = document.getElementById(containerId);
        if (!container) {
            console.error(`Контейнер з ID "${containerId}" не знайдено.`);
            return;
        }

        try {
            const currentBookGenre = query;
            if (!currentBookGenre) {
                container.innerHTML = '<p>Жанр для пошуку не вказано.</p>';
                return;
            }

            // Спрощений запит - шукаємо книги за жанром (subject)
            const response = await fetch(`https://openlibrary.org/search.json?subject=${encodeURIComponent(currentBookGenre)}&limit=10`);

            const data = await response.json();
            console.log('Отримані дані:', data);

            if (data.docs && data.docs.length > 0) {
                await renderBooks(data.docs, container);
            } else {
                // Спроба знайти книги за більш загальним запитом
                const fallbackResponse = await fetch(`https://openlibrary.org/search.json?q=${encodeURIComponent(currentBookGenre)}&limit=10`);
                const fallbackData = await fallbackResponse.json();

                if (fallbackData.docs && fallbackData.docs.length > 0) {
                    await renderBooks(fallbackData.docs, container);
                } else {
                    container.innerHTML = '<p>Не вдалося знайти книги за цим жанром.</p>';
                }
            }
        } catch (error) {
            console.error('Помилка при отриманні або відображенні книг:', error);
            container.innerHTML = '<p>Виникла помилка при завантаженні книг.</p>';
        }
    }

    async function renderBooks(books, container) {
        container.innerHTML = '';
        const innerContainer = document.createElement('div');
        innerContainer.classList.add('flex', 'min-w-max', 'gap-[100px]');
        container.appendChild(innerContainer);

        for (const book of books) {
            const coverId = book.cover_i;
            const coverUrl = coverId ? `https://covers.openlibrary.org/b/id/${coverId}-M.jpg` : './img/bookk.jpg';
            const bookTitle = book.title;
            const bookAuthor = book.author_name ? book.author_name[0] : 'Невідомий автор';
            const bookKey = book.key;
            const bookGenres = book.subject ? book.subject.slice(0, 2).join(', ') : 'Жанр невідомий';

            const bookElement = document.createElement('div');
            bookElement.classList.add(
                'border-2', 'rounded-[10px]', 'bg-gray-300', 'w-[187px]', 'h-[320px]',
                'flex-shrink-0', 'shadow-myshadow', 'flex', 'flex-col', 'justify-between', 'p-2'
            );

            bookElement.innerHTML = `
            <img src="${coverUrl}" alt="${bookTitle} обкладинка" class="rounded-t-[8px] w-full h-[200px] object-cover">
            <div class="p-2 flex flex-col justify-between h-full">
                <h3 class="text-gray-800 text-sm font-semibold overflow-hidden">${bookTitle}</h3>
                <p class="text-gray-600 text-xs overflow-hidden">${bookAuthor}</p>
                <p class="text-gray-500 text-[10px] mt-1 overflow-hidden">${bookGenres}</p>
                <a href="https://openlibrary.org${bookKey}" target="_blank" class="mt-2 text-blue-500 text-xs hover:underline">Детальніше</a>
            </div>
        `;
            innerContainer.appendChild(bookElement);
        }
    }
    document.addEventListener('DOMContentLoaded', () => {
        const urlParams = new URLSearchParams(window.location.search);
        const booksGeners = urlParams.get('booksGeners'); // Отримуємо жанр
        console.log('Отриманий жанр з URL:', booksGeners);

        // Інші параметри книги
        const img = urlParams.get('img');
        const title = urlParams.get('title');
        const author = urlParams.get('author');
        const description = urlParams.get('description');
        const price = urlParams.get('price');

        // Оновлення інформації про книгу
        if (img) document.getElementById('book-img').src = img;
        if (title) document.getElementById('book-title').textContent = title;
        if (author) document.getElementById('book-author').textContent = author;
        if (description) document.getElementById('book-description').textContent = description;
        document.getElementById('book-price').textContent = price ? `$${price}` : '$0.00';

        // Обробка жанру для пошуку схожих книг
        const booksGenreContainer = document.getElementById('booksGenre');
        if (booksGenreContainer) {
            if (booksGeners) {
                fetchAndDisplaySearchedBooks(booksGeners, 'booksGenre');
            } else {
                console.log('Жанр не знайдено в URL параметрах - використовуємо жанр за замовчуванням');
                // Можна встановити жанр за замовчуванням або показати повідомлення
                fetchAndDisplaySearchedBooks('fiction', 'booksGenre'); // Наприклад, шукати 'fiction'
                // Або показати повідомлення:
                // booksGenreContainer.innerHTML = '<p>Не вказано жанр для пошуку схожих книг.</p>';
            }
        } else {
            console.error('Контейнер з ID "booksGenre" не знайдено.');
        }
    });



    fetch('./modal.html')
        .then(response => response.text())
        .then(html => {
            document.getElementById('modal-container').innerHTML = html;
            initializeModal();
        });

    function initializeModal() {
        const openSavedModalButton = document.getElementById('openSavedModal');
        const savedModal = document.getElementById('savedModal');
        const closeModalButton = document.getElementById('closeModal');
        const savedBooksList = document.getElementById('savedBooksList');
        const openCartModalButton = document.getElementById('openCartModal');
        const cartModal = document.getElementById('cartModal');
        const closeCartModalButton = document.getElementById('closeCartModal');

        savedModal.classList.add('hidden');
        cartModal.classList.add('hidden');

        // події для відкриття та закриття модалки кошика
        openCartModalButton.addEventListener('click', () => {
            cartModal.classList.remove('hidden');
            loadCartBooks();
        });

        closeCartModalButton.addEventListener('click', () => {
            cartModal.classList.add('hidden');
        });

        //  події для відкриття та закриття модалки збережених книг
        openSavedModalButton.addEventListener('click', () => {
            savedModal.classList.remove('hidden');
            loadSavedBooks();
        });

        closeModalButton.addEventListener('click', () => {
            savedModal.classList.add('hidden');
        });

        // Додавання нової книги
        const saveButton = document.querySelector('.infoBook button');
        saveButton.addEventListener('click', () => {
            const bookImg = document.getElementById('book-img').src;
            const bookTitle = document.getElementById('book-title').innerText;
            const bookAuthor = document.getElementById('book-author').innerText;
            const bookPrice = document.getElementById('book-price').innerText;
            const bookCount = parseInt(document.getElementById('book-count').innerText); //перетворюємо в число

            const bookData = {
                img: bookImg,
                title: bookTitle,
                author: bookAuthor,
                price: bookPrice,
                quantity: bookCount
            };

            let savedBooks = JSON.parse(localStorage.getItem('savedBooks')) || [];
            //чи є книга
            const existingBook = savedBooks.find(book => book.title === bookTitle);

            if (existingBook) {
                // Якщо книга вже є — додаємо вибрану кількість
                existingBook.quantity += bookCount;
            } else {
                // Якщо книги ще немає — додаємо нову
                savedBooks.push(bookData);
            }

            localStorage.setItem('savedBooks', JSON.stringify(savedBooks));
            loadSavedBooks();
        });

    }

    document.getElementById('addToCartBtn')?.addEventListener('click', function (e) {
        e.preventDefault();

        const bookImg = document.getElementById('book-img').src;
        const bookTitle = document.getElementById('book-title').innerText;
        const bookAuthor = document.getElementById('book-author').innerText;
        const bookPrice = document.getElementById('book-price').innerText;
        const bookCount = parseInt(document.getElementById('book-count').innerText); // кількість

        const bookData = {
            img: bookImg,
            title: bookTitle,
            author: bookAuthor,
            price: bookPrice,
            quantity: bookCount
        };

        let cartBooks = JSON.parse(localStorage.getItem('cartBooks')) || [];
        const existingBook = cartBooks.find(book => book.title === bookTitle);

        if (existingBook) {
            existingBook.quantity += bookCount;
        } else {
            cartBooks.push(bookData);
        }

        localStorage.setItem('cartBooks', JSON.stringify(cartBooks));

    });



    ///////////////////////////////////////////////////////////////////////////////  збережені
    function loadSavedBooks() {
        //Список збережених книг отримується з localStorage
        const savedBooksList = document.getElementById('savedBooksList');
        const savedBooks = JSON.parse(localStorage.getItem('savedBooks')) || [];
        if (!savedBooksList) {
            console.error('Елемент #savedBooksList не знайдено!');
            return;
        }
        // Очищаємо список перед оновленням щоб оновити старий список
        savedBooksList.innerHTML = '';

        if (savedBooks.length === 0) {
            savedBooksList.innerHTML = '' +
                '<div class="flex pt-[30px]">' +
                '<p class="font-syne pt-[20px] text-orange-500 text-[30px] font-500">The list is empty ☹️</p></div>';
        } else {
            savedBooks.forEach(book => {
                const bookElement = document.createElement('div');
                bookElement.classList.add('flex', 'gap-[20px]', 'p-[10px]', 'mb-2');

                bookElement.innerHTML = `
<div class="border-gray pb-[40px] flex lg:p-[26px] xs:p-[10px] border-2 border-dashed rounded-[20px] lg:w-[416px] xs:w-[300px] xs:h-[150px] lg:h-[200px]">
    <div class="book border-2 rounded-[20px] lg:max-w-[103px] lg:h-[150px] xs:h-[114px] xs:max-w-[93px] bg-gray-300">
        <img src="${book.img}" alt="Book cover" class="rounded-[18px] lg:h-full xs:h-[110px] lg:max-w-[100px] xs:max-w-[90px]" />
    </div>
    <div class="flex flex-col">
        <div class="flex lg:gap-[40px] xs:gap-[15px] text-start">
            <div class="flex flex-col lg:gap-[12px] xs:gap-[6px]">
                <p class="scrollName flex pl-[31px] text-gray text-[18px] font-[400] leading-[1.2] font-syne">${book.title}</p>
                <p class="scrollAuthor flex pl-[31px] text-gray text-[16px] max-w-[90px] font-[400] leading-[1.2] font-syne">${book.author}</p>
            </div>
            <div class="text-orange text-[24px] pr-[20px] font-[400] font-syne leading-[1.2]">
                ${book.price}
            </div>
        </div>
        <div class="flex justify-end flex-col h-full lg:pt-[20px] xs:pt-[15px]">
            <div class="flex justify-between lg:gap-[40px] xs:gap-[10px]">
                <div class="flex relative items-center w-full lg:pl-[31px] xs:pl-[10px] lg:h-[35px] xs:h-[15px] lg:gap-[8px] xs:gap-[5px]">
                    <button class="decreaseQuantity xs:max-w-[15px]">
                        <img src="./icon/MINUS_CIRCLE.png" class="lg:w-[16px] xs:w-[40px] h-[16px]">
                    </button>
                    <div class="flex xs:max-w-[30px] lg:max-w-[80px] leading-[1.2] justify-center items-center w-[52px] lg:h-[35px] xs:h-[25px] border-2 rounded-[10px] border-gray lg:text-[18px] xs:text-[13px] font-syne font-[400] text-gray">
                        ${book.quantity}
                    </div>
                    <button class="increaseQuantity xs:max-w-[15px]">
                        <img src="./icon/PLUS_CIRCLE.png" class="lg:w-[16px] xs:w-[40px] h-[16px]">
                    </button>

                    <div class="pl-[10px] flex items-center gap-[8px]">
                        <button class="flex justify-center items-center w-[45px] h-[45px] removeBook">
                            <img src="./icon/TRASH.png" class="w-[28px] h-[30px]" alt="">
                        </button>
                        <button class="movecard flex justify-center items-center w-[45px] h-[45px] ">
                            <img src="./icon/SHOPPINGCART.png" class="w-[26px] h-[22px]" alt="">
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>`;



                // Додавання елементу в список
                savedBooksList.appendChild(bookElement);

                // Додавання функції для видалення книги
                const removeButton = bookElement.querySelector('.removeBook');
                removeButton.addEventListener('click', () => {
                    const index = savedBooks.indexOf(book);
                    if (index > -1) {
                        savedBooks.splice(index, 1);
                        localStorage.setItem('savedBooks', JSON.stringify(savedBooks));
                        loadSavedBooks(); // Оновлюємо список
                    }
                });

                // функцій для зміни кількості в модалці збережені книги

                const increaseButton = bookElement.querySelector('.increaseQuantity');
                const decreaseButton = bookElement.querySelector('.decreaseQuantity');

                increaseButton.addEventListener('click', () => {
                    book.quantity++;
                    updateBookQuantity(book);
                    loadSavedBooks();
                });

                decreaseButton.addEventListener('click', () => {
                    if (book.quantity > 1) {
                        book.quantity--;
                        updateBookQuantity(book);
                        loadSavedBooks();
                    }
                });
                function showToast(message) {
                    const toast = document.getElementById('toast');
                    toast.innerText = message;
                    toast.classList.remove('hidden');
                    toast.classList.add('flex');

                    setTimeout(() => {
                        toast.classList.add('hidden');
                        toast.classList.remove('flex');
                    }, 3000);
                }

                // Додавання функції для переміщення книги в корзину
                //берем кнопку
                const moveCardButton = bookElement.querySelector('.movecard');
                //обробник події на кнопку
                moveCardButton.addEventListener('click', () => {
                    //тут із localStorage витягуються всі книги, що знаходяться в кошику (якщо вони є
                    let cartBooks = JSON.parse(localStorage.getItem('cartBooks')) || [];

                    const existingCartBook = cartBooks.find(cartBook => cartBook.title === book.title);
                    //Оновлення кількості книги в кошику або додавання нової
                    if (existingCartBook) {
                        existingCartBook.quantity += book.quantity;
                    } else {
                        cartBooks.push(book);
                    }

                    localStorage.setItem('cartBooks', JSON.stringify(cartBooks));
                    //видаляється книга з збережених яка переміщена в корзину
                    let savedBooks = JSON.parse(localStorage.getItem('savedBooks')) || [];
                    savedBooks = savedBooks.filter(savedBook => savedBook.title !== book.title);
                    localStorage.setItem('savedBooks', JSON.stringify(savedBooks));

                    loadSavedBooks();

                    showToast('The book moved to cart! 🛒');
                });

            });
        }
    }
        //це для зміни кількості у локал с
    function updateBookQuantity(book) {
        let savedBooks = JSON.parse(localStorage.getItem('savedBooks')) || [];
        const bookIndex = savedBooks.findIndex(savedBook => savedBook.title === book.title);
        if (bookIndex > -1) {
            // Перевірка на undefined або null
            if (savedBooks[bookIndex].quantity === undefined || savedBooks[bookIndex].quantity === null) {
                savedBooks[bookIndex].quantity = 1;
            }
            savedBooks[bookIndex].quantity = book.quantity;
            localStorage.setItem('savedBooks', JSON.stringify(savedBooks));
        }
    }

    document.getElementById('myButton').addEventListener('click', function() {
        let button = this;

        button.classList.add('yellow-bg');


        setTimeout(function() {
            button.classList.remove('yellow-bg');
        }, 3000);
    });


    ///////////////////////////////////////////////////////////////////////////////  кошик
    function loadCartBooks() {
        //Отримання елемента для списку книг у кошику
        const cartBooksList = document.getElementById('cartBooksList');
        //localStorage.getItem('cartBooks') — намагається отримати збережену інформацію про книги в кошику з localStorage за ключем cartBooks.
        //JSON.parse() перетворює отриманий рядок у масив або об'єкт, якщо це було раніше збережено в такому форматі.
        const cartBooks = JSON.parse(localStorage.getItem('cartBooks')) || [];

        // Очищаємо список перед оновленням
        cartBooksList.innerHTML = '';

        if (cartBooks.length === 0) {
            cartBooksList.innerHTML = '<div class="flex pt-[30px]"><p class="font-syne pt-[20px] text-orange-500 text-[30px] font-500">Your cart is empty 🛒</p></div>';
        } else {
            let totalPrice = 0; // Змінна для підрахунку загальної ціни
            let totalQuantity = 0; // Змінна для підрахунку загальної кількості книг

            cartBooks.forEach((book, index) => {
                const bookElement = document.createElement('div');
                bookElement.classList.add('flex', 'gap-[20px]', 'p-[10px]', 'mb-2');

                bookElement.innerHTML = `
<div class="border-gray pb-[40px]   flex lg:p-[26px] xs:p-[10px] border-2 border-dashed rounded-[20px] lg:w-[416px] xs:w-[300px] lg:h-[210px] xs:h-[150px]">
    <div class="book border-2 rounded-[20px] lg:max-w-[103px] lg:h-[150px] xs:h-[114px] xs:max-w-[93px] bg-gray-300">
        <img src="${book.img}" alt="Book cover" class="rounded-[18px] lg:h-full xs:h-[110px] lg:max-w-[100px] xs:max-w-[90px]" />
    </div>
    <div class="flex flex-col">
        <div class="flex lg:gap-[40px] xs:gap-[15px] text-start">
            <div class="flex flex-col lg:gap-[12px] xs:gap-[6px]">
                <p class="flex scrollName pl-[31px] text-gray text-[15px] font-[400] leading-[1.2] font-syne">${book.title}</p>
                <p class="flex scrollAuthor pl-[31px] text-gray text-[15px] font-[400] leading-[1.2] font-syne">${book.author}</p>
            </div>
            <div class="text-orange text-[24px] font-[400] font-syne leading-[1.2]">
                ${book.price}
            </div>
        </div>
        <div class="flex justify-end flex-col h-full lg:pt-[20px] xs:pt-[35px]">
            <div class="flex justify-between lg:gap-[150px] xs:gap-[60px]">
                <div class="flex relative items-center lg:pb-0 xs:pb-[52px] w-full lg:pl-[31px] xs:pl-[10px] lg:h-[35px] xs:h-[15px] lg:gap-[12px] xs:gap-[7px]">
                    <button class="decreaseQuantity xs:max-w-[15px]">
                        <img src="./icon/MINUS_CIRCLE.png" class="lg:w-[16px] xs:w-[40px] h-[16px]">
                    </button>
                    <div class="flex xs:max-w-[30px] lg:max-w-[80px] leading-[1.2] justify-center items-center w-[52px] lg:h-[35px] xs:h-[25px] border-2 rounded-[10px] border-gray lg:text-[18px] xs:text-[13px] font-syne font-[400] text-gray">
                        ${book.quantity}
                    </div>
                    <button class="increaseQuantity xs:max-w-[15px]">
                        <img src="./icon/PLUS_CIRCLE.png" class="lg:w-[16px] xs:w-[40px] h-[16px]">
                    </button>

                    <button class="flex justify-center  items-center w-[50px] h-[50px] removeBook" data-index="${index}">
                        <img src="./icon/TRASH.png" class="w-[30px] h-[32px]" alt="">
                     </button>

                </div>

            </div>
        </div>
    </div>

</div>
`;

                cartBooksList.appendChild(bookElement);

                const price = parseFloat(book.price.replace('$', ''));
                const quantity = parseInt(book.quantity);

                if (!isNaN(price) && !isNaN(quantity)) {
                    totalPrice += price * quantity;
                    totalQuantity += quantity;
                } else {
                    console.error(`шось не число: ${book.title}`, book);
                }
            });

            // Виведення загальної ціни та кількості книг внизу
            const totalElement = document.createElement('div');
            totalElement.classList.add('flex', 'justify-between', 'mt-2', 'p-2','gap-[20px]', 'border-t', 'border-gray-300');
            totalElement.innerHTML = `
<div class="flex flex-col">
 <div class="flex xs:gap-[30px] lg:gap-[120px]">
        <div class="font-syne text-[25px] flex items-center">
            <span class="font-syne text-[20px]">Books:</span> ${totalQuantity}
        </div>
        <div class="flex items-center ">
            <div class="font-syne text-[20px] pr-[15px]">Total price:</div>
            <div class="font-syne text-orange-500 font-bold text-[30px]">
                $${totalPrice.toFixed(2)}
            </div>
        </div>
    </div>
  </div>



`;

            cartBooksList.appendChild(totalElement);
        }
// Додамо обробники для кнопок збільшення та зменшення кількості
        const decreaseButtons = document.querySelectorAll('.decreaseQuantity');
        decreaseButtons.forEach((button, index) => {
            button.addEventListener('click', () => {
                updateQuantity(index, -1);
            });
        });

        const increaseButtons = document.querySelectorAll('.increaseQuantity');
        increaseButtons.forEach((button, index) => {
            button.addEventListener('click', () => {
                updateQuantity(index, 1);
            });
        });
// Функція для оновлення кількості книги в модалці в  кошику
        function updateQuantity(index, change) {
            const cartBooks = JSON.parse(localStorage.getItem('cartBooks')) || [];
            if (cartBooks[index]) {
                const newQuantity = Math.max(1, parseInt(cartBooks[index].quantity) + change);
                if (!isNaN(newQuantity)) {
                    cartBooks[index].quantity = newQuantity;
                    localStorage.setItem('cartBooks', JSON.stringify(cartBooks));
                    loadCartBooks(); // Перезавантажуємо кошик для відображення змін
                    // Оновлюємо дані про кількість в localStorage 'savedBooks', якщо потрібно
                    updateSavedBooksQuantity(cartBooks[index]);
                } else {
                    console.error(`Некоректне значення кількості.`);
                }
            }
        }
// Функція для оновлення кількості в 'savedBooks'
        function updateSavedBooksQuantity(updatedBook) {
            let savedBooks = JSON.parse(localStorage.getItem('savedBooks')) || [];
            const savedBookIndex = savedBooks.findIndex(book => book.title === updatedBook.title);
            if (savedBookIndex > -1) {
                savedBooks[savedBookIndex].quantity = updatedBook.quantity;
                localStorage.setItem('savedBooks', JSON.stringify(savedBooks));
            }
        }


        // Додамо обробник для кнопки видалення
        const removeButtons = document.querySelectorAll('.removeBook');
        removeButtons.forEach(button => {
            button.addEventListener('click', () => {
                const index = button.getAttribute('data-index'); // отримуємо індекс книги
                removeBookFromCart(index);
            });
        });
    }

    // функція для зміни кіькості на сторінці під книгою

   function updateQuantity(button, change) {
        const bookElement = button.closest('.flex'); // Знаходимо батьківський елемент
        const quantityElement = bookElement.querySelector('.quantityDisplay'); // Оновлюємо елемент кількості
        let quantity = parseInt(quantityElement.innerText);

        // новлюємо кількість
        quantity += change;

        if (quantity < 1) {
            quantity = 1;
        }

        // Оновлюємо текст на сторінці
        quantityElement.innerText = quantity.toString();

        // Оновлюємо localStorage для кошика
        const cartBooks = JSON.parse(localStorage.getItem('cartBooks')) || [];
        const index = [...bookElement.parentElement.children].indexOf(bookElement);
        cartBooks[index].quantity = quantity;
        localStorage.setItem('cartBooks', JSON.stringify(cartBooks));

        // Оновлюємо в 'savedBooks'
        const bookTitle = cartBooks[index].title;
        updateSavedBooksQuantity({
            title: bookTitle,
            quantity: quantity
        });


        loadCartBooks();
    }



    // Функція видалення книги з кошика
    function removeBookFromCart(index) {
        const cartBooks = JSON.parse(localStorage.getItem('cartBooks')) || [];

        //видаляємо книгу з масиву
        const updatedCartBooks = cartBooks.filter((book, i) => i !== parseInt(index));

        // оновлюємо localStorage
        localStorage.setItem('cartBooks', JSON.stringify(updatedCartBooks));

        //  оновлений кошик
        loadCartBooks();
    }
    document.addEventListener('DOMContentLoaded', function() {
        //  обробники подій до кнопок після завантаження сторінки
        document.querySelectorAll('.decreaseQuantity').forEach(button => {
            button.addEventListener('click', () => updateQuantity(button, -1));
        });

        document.querySelectorAll('.increaseQuantity').forEach(button => {
            button.addEventListener('click', () => updateQuantity(button, 1));
        });
    });
    document.getElementById('cartIcon').addEventListener('click', () => {
        document.getElementById('cartModal').classList.remove('hidden');
        loadCartBooks(); // <- ось тут викликаємо!
    });

    window.addEventListener('DOMContentLoaded', loadSavedBooks);

    loadCartBooks();





</script>


<script src="./app.js"></script>
<script src="./formOneBook.js"></script>
<script src="./formAllBooks.js"></script>

</body>
</html>